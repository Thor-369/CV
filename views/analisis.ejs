<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="keywords"
    content="Juego, juego de monty hall,Simulador de Monty Hall, Simulador, Monty,  Hall, Puertas, Carro, Cabra, Análisis, Numérico, numerico, unl, universidad, javascript, matemáticas" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
    name='viewport' />

  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

  <link href="assets/css/bootstrap.min.css?ver=1.1.0" rel="stylesheet">
  <noscript>
    <style type="text/css">
      [data-aos] {
        opacity: 1 !important;
        transform: translate(0) scale(1) !important;
      }
    </style>
  </noscript>
  <title>
    <%= title %>
  </title>

</head>

<body id="top" style="background-image: linear-gradient(to right,rgb(170, 153, 153), rgb(141, 141, 241));">

  <div class="container mx-auto" style="padding-top: 9px ; ">
    <h2 style="text-align: center;">Simulador de Monty Hall</h2>
    <br>
    <div class="card mx-auto"
      style="border-radius: 30px;box-shadow: 0 6px 9px rgba(0,0,0,0.25),0 9px 8px rgba(0,0,0,0.22); background-color: rgba(0,0,0,0.25);">

      <p class="h5 mx-auto text-white" id="estado">Elige una puerta</p>

      <div class="row mx-auto   " style="border-radius: 30px;  padding-bottom: 10px; margin: 10px;">

        <div class="carta cartas" id="1" onclick="detectarclick1()" style="cursor:pointer">
          <div class="cara card bg-danger text-center text-white mx-auto ">
            <p style="padding-top: 30px;padding-bottom: 30px;">Puerta 1 </p>
          </div>
          <div class="cara detras">
            <a id="p1">
              <h1><i class=" fa fa-remove"></i></h1>
            </a>
          </div>
        </div>
        <div class="carta2 cartas" id="2" onclick="detectarclick2()" style="cursor:pointer">
          <div class="cara2 card bg-danger text-center text-white mx-auto ">
            <p style="padding-top: 30px;padding-bottom: 30px;">Puerta 2 </p>
          </div>
          <div class="cara2 detras2">
            <a id="p2">
              <h1><i class=" fa fa-remove"></i></h1>
            </a>
          </div>
        </div>
        <div class="carta3 cartas" id="3" onclick="detectarclick3()" style="cursor:pointer">
          <div class="cara3 card bg-danger text-center text-white mx-auto ">
            <p style="padding-top: 30px;padding-bottom: 30px;">Puerta 3 </p>
          </div>
          <div class="cara3 detras3">
            <a id="p3">
              <h1><i class=" fa fa-remove"></i></h1>
            </a>
          </div>
        </div>

      </div>
      <br>
      <div class="card bg-dark text-white row "
        style="padding: 30px; border-radius: 30px; box-shadow: 0 6px 9px rgba(0,0,0,0.25), 0 9px 8px rgba(0,0,0,0.22);">
        <table class="col-md-4 mx-auto " style="padding: 30px; border-radius: 30px; ">
          <h3 class="mx-auto">Resultados:</h3>
          <tr style="background-color: rgba(0,0,0,0.25);">
            <td>Ganadas</td>
            <td id="gana">0</td>
          </tr>
          <tr>
            <td>Perdidas</td>
            <td id="pierde">0</td>
          </tr>
          <tr style="background-color: rgba(0,0,0,0.25);">
            <td>Éxito total: </td>
            <td id="prop">0%</td>
          </tr>
        </table>
        <div class="container text-center mx-auto"><img class="img-fluid " style="width: 12%; padding-top: 30px;"
            src="/images/Tow-D.png"> </div>
      </div>
      <p class="text-white ml-auto">autor: Pablo Torres</p>
    </div>
</body>


<style>
  .cartas {
    padding-top: 60px;
    padding-bottom: 60px;
    margin-left: 30px;
    margin-right: 60px;
    background-color: rgba(0, 0, 0, 0.25);
  }

  .carta-box {
    position: relative;
    perspective: 1000px;
  }

  .carta {
    transform-style: preserve-3d;
    transition: all 0.5s linear;
  }

  .cara {
    position: absolute;
    backface-visibility: hidden;
  }

  .cara.detras {
    transform: rotateY(180deg);
  }



  .carta2 {
    transform-style: preserve-3d;
    transition: all 0.5s linear;
  }

  .cara2 {
    position: absolute;
    backface-visibility: hidden;
  }

  .cara2.detras2 {
    transform: rotateY(180deg);
  }


 

  .carta3 {
    transform-style: preserve-3d;
    transition: all 0.5s linear;
  }

  .cara3 {
    position: absolute;
    backface-visibility: hidden;
  }

  .cara3.detras3 {
    transform: rotateY(180deg);
  }

  div {
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
  }
</style>



<script>

function boolean() { 
    if (Math.random() < 0.5) {
        return false
    }   else {
        return true
    }
}


// Sorteo de la puerta ganadora
  // FUNCION RANDOM CON RANGO 
  function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}
/*Genero la puerta ganadora */        
  var winner = getRandomInt(1, 4)
document.getElementById("p"+winner).innerHTML =" <h1><i class=' fa fa-car'></i></h1>"

 // Variables iniciales para escribir datos de la simulación
  var numWin = 0;
  var numLoss = 0;
  var ratioValue = 0;
  numWin = sessionStorage.getItem("wins");
  numLoss = sessionStorage.getItem("loses");
  ratioValue = sessionStorage.getItem("ratio");
        
        var g = numWin;
        var p = numLoss;
        /*Mostrar datos almacenados*/      
        document.getElementById("gana").innerHTML = g;
        document.getElementById("pierde").innerHTML = p; 

  var stats = document.getElementById('estado'); stats.innerHTML = 'Elige una puerta.';

  var click = 0; 
  var jugado=false;
  var win = document.getElementById('gana'); 
  var loss = document.getElementById('pierde'); 
  var ratio = document.getElementById('prop'); 
  win.innerHTML = numWin; loss.innerHTML = numLoss;ratio.innerHTML = (ratioValue * 100).toFixed(1);
          win.innerHTML = numWin;
          loss.innerHTML = numLoss;
          ratio.innerHTML = (ratioValue * 100).toFixed(1);

          turn = -1;
  detectarclick1 = () => {
    if(click==0){ 
      jugado=false;                      //SI NO HICE NINGUN CLICK  - click en primera puerta
      click = 1;    
      var perdedora = 0;
      if(winner==1){      //Puerta 1 ganadora entonces abre random entre 2 o 3
        perdedora=getRandomInt(2, 4)
      }else if(winner==2){//Puerta 2 ganadora entonces abre 3
        perdedora=3;
      } else{           //Puerta 3 ganadora entonces abre 2
        perdedora=2;
      } 
      var div = document.getElementById(perdedora);
      div.style.webkitTransform = 'rotateY(180deg)';div.style.mozTransform = 'rotateY(180deg)';div.style.msTransform = 'rotateY(180deg)';div.style.oTransform = 'rotateY(180deg)';div.style.transform = 'rotateY(180deg)';
    stats.innerHTML = "Buena elección!"
    setTimeout(function(){stats.innerHTML='Seguro que quieres esa puerta? vuelve a elegir '},800);
 
    }else{                              //SI YA HICE CLICK    - click en primera puerta por segunda vez
      if(jugado==true){location.reload();}else{
    if(winner==1){ 
      stats.innerHTML = 'Felicidades!'
      setTimeout(function(){stats.innerHTML='Has ganado un vehículo 0Km'},800);
      numWin=numWin+1;jugado=true;
      }else{ 
        stats.innerHTML = 'Perdiste!'
        numLoss=numLoss+1;
        jugado=true;
    setTimeout(function(){stats.innerHTML='Solo te ganaste una cabra xD'},800);
      }}
      var div = document.getElementById(1);
      div.style.webkitTransform = 'rotateY(180deg)';div.style.mozTransform = 'rotateY(180deg)';div.style.msTransform = 'rotateY(180deg)';div.style.oTransform = 'rotateY(180deg)';div.style.transform = 'rotateY(180deg)';
    }
  }
  detectarclick2 = () => {
    if(click==0){ 
      jugado=false;                      //SI NO HICE NINGUN CLICK  - en click segunda puerta
      click = 1;    
      var perdedora = 0;
      if(winner==1){      //Puerta 1 ganadora entonces abre 3
        perdedora=3;
      }else if(winner==2){//Puerta 2 ganadora entonces abre random 1 o 3
        if(boolean()==true){
        perdedora=1;}else{perdedora=3}
      } else{           //Puerta 3 ganadora entonces abre 1
        perdedora=1;
      } 
      var div = document.getElementById(perdedora); //Le doy la vuelta a la puerta perdedora RANDOM
      div.style.webkitTransform = 'rotateY(180deg)'; div.style.mozTransform = 'rotateY(180deg)';div.style.msTransform = 'rotateY(180deg)';div.style.oTransform = 'rotateY(180deg)'; div.style.transform = 'rotateY(180deg)'; 
    stats.innerHTML = "Buena elección!"
    setTimeout(function(){stats.innerHTML='Seguro que quieres esa puerta? vuelve a elegir '},800);
 
    }else{                              //SI YA HICE CLICK    - click en segunda puerta por segunda vez
      if(jugado==true){location.reload();}else{
    if(winner==2){ 
    stats.innerHTML = 'Felicidades!'
    setTimeout(function(){stats.innerHTML='Has ganado un vehículo 0Km'},800);
    numWin=numWin+1;jugado=true;
      }else{ 
        stats.innerHTML = 'Perdiste!'
        numLoss=numLoss+1;jugado=true;
    setTimeout(function(){stats.innerHTML='Solo te ganaste una cabra xD'},800);
      }}
      var div = document.getElementById(2);
      div.style.webkitTransform = 'rotateY(180deg)';div.style.mozTransform = 'rotateY(180deg)';div.style.msTransform = 'rotateY(180deg)';div.style.oTransform = 'rotateY(180deg)';div.style.transform = 'rotateY(180deg)';

    }
  }
  detectarclick3 = () => {
    if(click==0){
      jugado=false;                       //SI NO HICE NINGUN CLICK  - click en tercera puerta
      click = 1;    
      var perdedora = 0;
      if(winner==1){      //Puerta 1 ganadora entonces abre 2
        perdedora=2
      }else if(winner==2){//Puerta 2 ganadora entonces abre 3
        perdedora=1;
      } else{           //Puerta 3 ganadora entonces abre 1 o 2
        perdedora=getRandomInt(1, 3);
      } 
      var div = document.getElementById(perdedora);
      div.style.webkitTransform = 'rotateY(180deg)';div.style.mozTransform = 'rotateY(180deg)';div.style.msTransform = 'rotateY(180deg)';div.style.oTransform = 'rotateY(180deg)';div.style.transform = 'rotateY(180deg)';

    stats.innerHTML = "Buena elección!"
    setTimeout(function(){stats.innerHTML='Seguro que quieres esa puerta? vuelve a elegir '},800);
 
    }else{                              //SI YA HICE CLICK    - click en tercera puerta por segunda vez
      if(jugado==true){location.reload();}else{
    if(winner==3){ 
    stats.innerHTML = 'Felicidades!'
    setTimeout(function(){stats.innerHTML='Has ganado un vehículo 0Km'},800);
    numWin=numWin+1;jugado=true;
      }else{ 
        stats.innerHTML = 'Perdiste!'
        numLoss=numLoss+1;jugado=true;
    setTimeout(function(){stats.innerHTML='Solo te ganaste una cabra xD'},800);
      }}
      var div = document.getElementById(3); 
    div.style.webkitTransform = 'rotateY(180deg)';div.style.mozTransform = 'rotateY(180deg)';div.style.msTransform = 'rotateY(180deg)';div.style.oTransform = 'rotateY(180deg)';div.style.transform = 'rotateY(180deg)';
    }
  } 
</script>

</html>